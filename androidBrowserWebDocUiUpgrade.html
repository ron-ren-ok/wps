<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>演示Demo: H5云文档下载引导</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body, .font-roboto {
            font-family: 'Roboto', sans-serif;
        }
        /* 自定义滚动条样式 */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* 隐藏横向滚动条 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* 弹窗和蒙层的过渡效果 */
        #modal, #overlay {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-200 flex items-center justify-center min-h-screen font-roboto relative">

    <!-- Demo 控制器 -->
    <div class="absolute top-1/2 -translate-y-1/2 right-5 z-50 flex flex-col space-y-4 bg-white p-4 rounded-lg shadow-xl border w-48">
        <h3 class="text-center font-bold text-gray-700 border-b pb-2">Demo 控制器</h3>
        <div>
            <button id="scroll-trigger-button" class="w-full bg-green-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-600 shadow-lg">
                模拟滚动
            </button>
            <p class="text-xs text-gray-500 mt-1 text-center">
                <b>真实逻辑:</b> 首次滚动时触发一次。
            </p>
        </div>
        <div>
             <p class="text-sm font-semibold text-center text-gray-600">"编辑" 按钮</p>
             <p class="text-xs text-gray-500 mt-1 text-center">
                 <b>真实逻辑:</b> 每次点击都会触发。
            </p>
        </div>
    </div>

    <!-- 模拟手机设备 -->
    <div class="w-[400px] h-[890px] bg-white shadow-2xl rounded-[40px] border-[12px] border-black overflow-hidden flex flex-col">
        
        <!-- 顶部状态栏 -->
        <div class="bg-white p-2 flex justify-between items-center text-sm text-gray-700">
            <span>10:30 AM</span>
            <div class="flex items-center space-x-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.556L11.333 4.444l3.222 12.112m-6.444 0a5.333 5.333 0 106.444 0m-6.444 0H3.333m11.111 0h4.778" /></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /></svg>
            </div>
        </div>

        <!-- H5文档页面 -->
        <div id="document-page" class="flex-1 flex flex-col bg-gray-50 relative overflow-hidden">
            <!-- H5顶部工具栏 -->
            <div class="bg-white shadow-md p-3 flex justify-between items-center z-10">
                <div class="flex items-center space-x-2">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                     <span class="font-semibold text-lg">Project_Proposal.docx</span>
                </div>
                <button id="edit-button" class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-blue-600">编辑</button>
            </div>

            <!-- 文档内容 (可滚动区域) -->
            <div id="document-content" class="flex-1 overflow-y-auto p-6 custom-scrollbar">
                <h2 class="text-2xl font-bold mb-4">Project Proposal: Q4 Growth Initiative</h2>
                <p class="text-gray-700 mb-4">
                    This document outlines the proposed initiative to drive user growth in the fourth quarter. Our primary focus will be on optimizing the new user acquisition funnel, starting with the H5 document sharing link.
                </p>
                <div class="h-12 bg-gray-200 rounded my-4"></div>
                <p class="text-gray-700 mb-4">
                    The current conversion rate from the H5 page is estimated at 2.5%. By implementing a more informative and trustworthy download prompt, we project an increase to at least 5%. This change is critical to our P0 strategic goal.
                </p>
                <div class="h-48 bg-gray-200 rounded my-4"></div>
                <p class="text-gray-700 mb-4">
                    The new modal will be inspired by the Google Play in-app download UI, which has proven effective in building user trust. It will include key information such as app rating, size, and security verification.
                </p>
                <div class="h-96 bg-gray-200 rounded my-4"></div>
                <p class="text-gray-700">End of document.</p>
            </div>

            <!-- 蒙层 -->
            <div id="overlay" class="absolute inset-0 bg-black bg-opacity-40 z-20 opacity-0 pointer-events-none"></div>

            <!-- 引导下载弹窗 -->
            <div id="modal" class="absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl p-4 shadow-[0_-10px_30px_-15px_rgba(0,0,0,0.3)] z-30 transform translate-y-full">
                <!-- 顶部区域 -->
                <div class="flex items-start justify-between mb-3">
                    <div class="flex items-center space-x-3">
                        <img src="https://play-lh.googleusercontent.com/7uk1-zZ0dJwW-rftl6vqduw26ldbxYTCxFhPwown2W4kGkIl32b4H14LltStdKDterCO=s96-rw" alt="WPS Office Logo" class="w-16 h-16 rounded-2xl" onerror="this.onerror=null;this.src='https://placehold.co/96x96/E2E8F0/4A5568?text=WPS';">
                        <div>
                            <h3 class="font-bold text-xl">WPS Office</h3>
                            <!-- **关键更新**: 删除了文件大小 -->
                            <div class="text-sm text-gray-500 flex items-center space-x-2 mt-1">
                                <span>4.7 ★</span>
                                <span class="text-gray-300">&bull;</span>
                                <span class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
                                    </svg>
                                    <span>500M+</span>
                                </span>
                            </div>
                             <!-- **关键更新**: 更新了盾牌图标地址 -->
                             <p class="text-xs text-green-600 font-semibold mt-1 flex items-center">
                                 <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEJElEQVR4nNWaXYhVVRTHf5NjoZFmmZqaMmhqMvmgEBqJIKblR6nkZCL5INXgYBQ9iClmjRD1ZIWMX5GkomigiQ9qYqCEIinolBIKkan4HTQ2OTM2I0v/BzbXOWfOPvece28/2DBz71prr/299toXsmEIUAscA/5Ssb8/AZ7mf0AFsAa4DbSFlP+AbcBQSrQB3wAtcrYZ2AxMAh5XeUmfNUumRTqmW3QqgC+AW04DvgUGR+gM1Ki15OgUZYTGAdudKRT07iAPG4NyRtFsbZPtTHkSeBc46cx3G4nVeU6PYF0Fo2rlBLBQdaaCTYNq4Ect0qCic8CHQK+0KgJ6A0uAP516bJQOAO/IFy9js4G1wNmc3aYB2ARMBcrJjnLVsUl1uj6clW+vy9dQcrfKC5rHs4AuFJ6uQBWwQb7k+hfKvxJYDFRSelTKtzb5Gsp1CfWndBkgH69GCZ2T0HBKl0r5+HuU0GkJjaZ0eV4+1kcJ/SyhFyldXpaPh6OEfpDQa4Xz6+6B+KCH/Bz5uDtKaK2EPqAwPAScUokbHSyVjxbjhbJIQnUUho9V368eo7JBOhbChFIlof1kz7NAk0KfFzz0fpKPtlZCGSWhP8iWTsAR1fWlp+5l6dktNJRu6iErD5Md7zkd9oiHXj8n7usw3jsh4fFkw0AnGJzmqTtbevviCNdJ+COyYY/sb0yg+5V0l8URnuvTamEXoB4x5N6U7StAT/w55jNbKpx52DmGfA/dGus1h8OwS9g12bZDzZfeumjd8lm/Qcw1MeZo1DuL95kQuS1xTuQI3pb+LjyoldK6mPKPAgelc6Odc2GyvvsbeIpk7JMNm/qxGSGlazGnF7pBfi+9f5wdqZtzD68hGY8pbWTTqruv8m+q3BJrcbG9/WsnRTQfWKX/DwEPkIz3ZWNnEuUlSeYkUAZ8Kt1WFevJYUmc4F7jz3is2fuw7bFRjiTJAi50UkjWKUmZIhu/qJMSsT5OyByBbbNHPdZZexyQD2+RByM0Ig0d5ZEiyKcRE9SIi2mko76TMVu0heaw6rYzJG+GaOtr7ih0TpkqNeJ0mpnNVXmeyr5013SyOl9N0/ATSoh5n6wJqVNdO7Iw/oZz2idd+HGYqG37RprPCrnsVGP26rqaNn2AS6pjHhliI3FeFa1I2bYt6P2ybU9xBUlZNul8mZmiXXu1ClKh9pxQEBY4qf2xKdgL8mlXi/EO/5kqtx8DjMzDTo1G10L/MRSBMr1mBZep5xIGlq06bO25rWh0cu4fFo/N8OiE5dKz9TadEqBM2cLg5xmLOwi3uzjx281ij0R7VKt3zcGtIekhS0wcl8z5PNdWpoxxXl8tVnpFn5dpp2vUd3ZH6UuJ08fJeLQpsxiE421aU8V46k7MLGUUgwZcSjuSpYDYz5s+B1bGTKkm5g59FUitfCGRsAAAAABJRU5ErkJggg==" class="h-4 w-4 mr-1">
                                 Verified by Google Play Protect
                             </p>
                        </div>
                    </div>
                    <button id="close-button" class="text-gray-400 hover:text-gray-600 p-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>

                <!-- 功能截图 -->
                <div class="flex space-x-2 overflow-x-auto pb-3 no-scrollbar mb-4">
                    <img src="https://placehold.co/200x350/E2E8F0/4A5568?text=All-in-one" alt="功能截图1" class="rounded-lg h-48 object-cover flex-shrink-0">
                    <img src="https://placehold.co/200x350/D1FAE5/10B981?text=Cloud+Sync" alt="功能截图2" class="rounded-lg h-48 object-cover flex-shrink-0">
                    <img src="https://placehold.co/200x350/DBEAFE/3B82F6?text=Templates" alt="功能截图3" class="rounded-lg h-48 object-cover flex-shrink-0">
                    <img src="https://placehold.co/200x350/FEF3C7/F59E0B?text=PDF+Tools" alt="功能截图4" class="rounded-lg h-48 object-cover flex-shrink-0">
                </div>
                
                <!-- 提示信息 -->
                <div id="modal-message" class="text-sm text-gray-600 mb-4 text-center h-5"></div>

                <!-- 操作按钮 -->
                <div class="flex items-center justify-end space-x-4">
                    <button id="cancel-button" class="text-blue-600 font-semibold px-4 py-2 rounded-md hover:bg-gray-100">Cancel</button>
                    <button class="bg-blue-600 text-white font-semibold px-6 py-2 rounded-md hover:bg-blue-700">Install</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 获取DOM元素
        const editButton = document.getElementById('edit-button');
        const modal = document.getElementById('modal');
        const overlay = document.getElementById('overlay');
        const closeButton = document.getElementById('close-button');
        const cancelButton = document.getElementById('cancel-button');
        const documentPage = document.getElementById('document-page');
        const modalMessage = document.getElementById('modal-message');
        const scrollTriggerButton = document.getElementById('scroll-trigger-button');

        // 显示弹窗的函数
        const showModal = (triggerSource) => {
            if (triggerSource === 'button_click') {
                modalMessage.textContent = 'To edit this document, install WPS Office.';
            } else { // 'scroll_simulation'
                modalMessage.textContent = 'Get the full experience in the WPS Office app.';
            }
            documentPage.classList.add('overflow-hidden');
            overlay.classList.remove('opacity-0', 'pointer-events-none');
            modal.classList.remove('translate-y-full');
            console.log(`Event: h5_download_modal_expose, Trigger: ${triggerSource}`);
        };

        // 隐藏弹窗的函数
        const hideModal = () => {
            documentPage.classList.remove('overflow-hidden');
            overlay.classList.add('opacity-0', 'pointer-events-none');
            modal.classList.add('translate-y-full');
            console.log('Event: h5_download_modal_close_click');
        };
        
        // "模拟滚动"按钮的逻辑
        const handleScrollSimulationClick = () => {
            showModal('scroll_simulation');
        };

        // "编辑"按钮的逻辑
        const handleEditClick = () => {
            showModal('button_click');
        };

        // 添加事件监听
        scrollTriggerButton.addEventListener('click', handleScrollSimulationClick);
        editButton.addEventListener('click', handleEditClick);
        closeButton.addEventListener('click', hideModal);
        cancelButton.addEventListener('click', hideModal);

    </script>

</body>
</html>
